#:kivy 1.9.1
<MainDeckScreen>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/H1a.png'
    MainDeckLayout:
<MainDeckLayout>:
    id: main_layout
    size_hint_x: 0.9
    pos_hint: {'center_x': 0.5}
    CharacterSelectButton:
        size_hint_x: 0.1
        size_hint_y: None
        pos_hint: {'center_x': 0.05, 'center_y': 0.95}
        on_press: root.parent.manager.current = 'character'
    PerkSelectScreenButton:
        size_hint_x: .1
        size_hint_y: None
        height: self.width * .3
        pos_hint: {'center_x': 0.95, 'center_y': 0.95}
        on_press: root.parent.manager.current = 'perk_selection'
    Deck:
        size_hint_x: 1
        size_hint_y: 0.3
        pos_hint: {'center_x': 0.5, 'center_y': 0.65}
    TopButtons:
        size_hint_y: 0.1
        size_hint_x: 1
        pos_hint: {'center_y': 0.9, 'center_x': 0.5}
        keep_ratio: True
        allow_stretch: True
    DrawResult:
        cols: 18
        col_force_default: True
        col_default_width: 30
        size_hint_x: 1
        size_hint_y: .1
        pos_hint: {'center_x': 0.5, 'center_y': 0.18}
    Discard:
        size_hint_x: 1
        size_hint_y: 0.3
        pos_hint: {'center_x': 0.5, 'center_y': 0.35}
    DiscardHistory:
        size_hint_x: 1
        size_hint_y: 0.15
        pos_hint: {'center_x': 0.5, 'center_y': 0.08}
    Image:
        source: 'images/null.png'
        size_hint_x: .001
        size_hint_y: .001
<Button>:
    font_name: 'fonts/gloomfont.ttf'
<Label>:
    font_name: 'fonts/gloomfont.ttf'
<Deck>:
    Image:
        source: 'images/deck_back.png'
        allow_stretch: True
    DrawButton:
        id: draw
        on_press: self.draw("simple")
        size_hint: 1, 1
        background_color: 0, 0, 0, 0
<SpecificCard>:
    opacity: root.my_opacity
    size_hint_x: root.my_size_hint_x
    size_hint_y: root.my_size_hint_y
    pos_hint: root.my_pos_hint
    allow_stretch: True
    Image:
        source: 'images/blank.png'
        size_hint: 1, 1
        allow_stretch: True
    Image:
        id: modifier
        source: root.modifier_image
        size_hint: 1, 1
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        allow_stretch: True
    Image:
        id: status
        source: root.status_image
        size_hint: 0.17, 0.17
        pos_hint: {'center_x': 0.15, 'center_y': 0.5}
    Image:
        id: element
        source: root.element_image
        size_hint: 0.2, 0.2
        pos_hint: {'center_x': 0.15, 'center_y': 0.5}
    Image:
        id: rolling
        source: root.rolling_image
        size_hint: 0.2, 0.2
        pos_hint: {'center_x': 0.85, 'center_y': 0.5}
    Image:
        id: character
        source: root.class_image
        pos_hint: {'center_x': 0.135, 'center_y': 0.22}
        size_hint: 0.1, 0.1
<TopButtons>:
    ShuffleButton:
        size_hint_y: None
        size_hint_x: 0.12
        height: self.width
        pos_hint: {'center_x': .14, 'center_y': .5}
        keep_ratio: True
    BlessButton:
        size_hint_y: None
        size_hint_x: 0.12
        height: self.width
        pos_hint: {'center_x': .28, 'center_y': .5}
        keep_ratio: True
    DemeritButton:
        size_hint_y: None
        size_hint_x: 0.12
        height: self.width
        pos_hint: {'center_x': .42, 'center_y': .5}
        keep_ratio: True
    CurseButton:
        size_hint_y: None
        size_hint_x: 0.12
        height: self.width
        pos_hint: {'center_x': .56, 'center_y': .5}
        keep_ratio: True
    AdvantageButton:
        size_hint_y: None
        size_hint_x: 0.12
        height: self.width
        pos_hint: {'center_x': .70, 'center_y': .5}
        keep_ratio: True
    DisadvantageButton:
        size_hint_y: None
        size_hint_x: 0.12
        height: self.width
        pos_hint: {'center_x': .84, 'center_y': .5}
        keep_ratio: True
<Discard>:
    size_hint: 1, 1
    allow_stretch: True
<DrawButton>:
<DisadvantageButton>:
    on_press: self.draw("disadvantage")
    background_normal: 'images/muddle_icon.png'
    keep_ratio: True
<ShuffleButton>:
    on_press: self.shuffle()
    disabled: self.shuffle_disabled
    background_normal: 'images/shuffle.png'
    background_disabled_normal: 'images/shuffle_disabled.png'
    keep_ratio: True  
<AdvantageButton>:
    on_press: self.draw("advantage")
    background_normal: 'images/strengthen_icon.png'
    keep_ratio: True
<CurseButton>:
    on_press: root.add_curse()
    background_normal: 'images/curse_icon.png'
    text: "0"
    halign: 'right'   
    valign: 'bottom'  
    text_size: self.size     
<DemeritButton>:
    on_press: root.add_demerit()
    background_normal: 'images/demerit.png'
    text: "0"
    halign: 'right'   
    valign: 'bottom'  
    text_size: self.size 
<DrawModifier>:
<BlessButton>:
    on_press: root.add_bless()
    keep_ratio: True
    background_normal: 'images/bless_icon.png'
    text: "0"
    halign: 'right'   
    valign: 'bottom'  
    text_size: self.size        
<DeckContentScreen>:
    Label:
        text: "deck_content"
<PerkSelectionScreen>:
    on_pre_enter: self.populate()
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/perk_sheet.png'
<StatusNumber>:
    pos_hint: {'center_x': .95, 'center_y': .45}
    size_hint_y: .3
    size_hint_x: None
    font_size: self.height * 0.5
<CharacterScreen>:
<CharacterButton>:
<CharacterLayout>:
    cols: 3
<CharacterScreen>:
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/L2b.png'
    CharacterLayout:
        CharacterButton:
            background_normal: 'images/brute.png'
            on_press: self.select_character('brute')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/tinkerer.png'
            on_press: self.select_character('tinkerer')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/spellweaver.png'
            on_press: self.select_character('spellweaver')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/cragheart.png'
            on_press: self.select_character('cragheart')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/scoundrel.png'
            on_press: self.select_character('scoundrel')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/mindtheif.png'
            on_press: self.select_character('mindtheif')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/sunkeeper.png'
            on_press: self.select_character('sunkeeper')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/quartermaster.png'
            on_press: self.select_character('quartermaster')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/summoner.png'
            on_press: self.select_character('summoner')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/nightshroud.png'
            on_press: self.select_character('nightshroud')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/plagueherald.png'
            on_press: self.select_character('plagueherald')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/berserker.png'
            on_press: self.select_character('berserker')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/soothsinger.png'
            on_press: self.select_character('soothsinger')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/doomstalker.png'
            on_press: self.select_character('doomstalker')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/sawbones.png'
            on_press: self.select_character('sawbones')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/elementalist.png'
            on_press: self.select_character('elementalist')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/beast_tyrant.png'
            on_press: self.select_character('beast_tyrant')
            on_release: root.manager.current = 'main'
        CharacterButton:
            background_normal: 'images/diviner.png'
            on_press: self.select_character('diviner')
            on_release: root.manager.current = 'main'
<CharacterSelectButton>:
    background_normal: self.character_image
    height: self.width
<ReturnToMainScreenButton>:
    pos_hint: {'center_x': .5, 'center_y': .03}
    size_hint_x: .1
    size_hint_y: None
    height: self.width
    background_normal: 'images/pull.png'
    on_press: self.apply_perks()
    on_release: self.parent.manager.current = 'main'
<PerkSelectScreenButton>:
    background_normal: 'images/perk_button.png'
    background_disabled_normal: 'images/null.png'
    disabled: self.is_disabled
<PerkLayout>:
    id: perk_layout_widget
    size_hint_y: .8
    pos_hint: {'center_y': .5}
    cols: 2
    rows: 15
<PerkSelectCheckbox>:
    perk_index: self.perk_index
    disabled: self.is_disabled
    on_disabled: self.update()
    size_hint_x: .2
<PerkLabel>:
    size_hint_x: .8
    perk_index: self.perk_index
    text_size: self.width, None
    color: self.my_text_color
    on_color: self.update()